package vn.smartdev.controller;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Controller;import org.springframework.transaction.annotation.Transactional;import org.springframework.ui.Model;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestMethod;import org.springframework.web.bind.annotation.RequestParam;import vn.smartdev.invoice.dao.entity.Invoice;import vn.smartdev.invoice.dao.entity.Status;import vn.smartdev.invoice.manager.InvoiceService;import javax.servlet.http.HttpServletRequest;import java.util.ArrayList;import java.util.List;import java.util.Locale;/** * Created by Nguyen on 30/11/2016. */@Controller@RequestMapping(value = "/admin")public class InvoiceController {    private static final Logger logger = LoggerFactory.getLogger(InvoiceController.class);    @Autowired    InvoiceService invoiceService;    @Transactional    @RequestMapping(value = {"/invoice"}, method = RequestMethod.GET)    public String invoice(Locale locale, Model model) {        List<Invoice> invoices = invoiceService.getAll();        for (Invoice invoice : invoices) {            System.out.println(invoice.getUsername());            System.out.println(invoice.getStatus().toString());        }        model.addAttribute("invoices", invoices);        return "adminInvoicePage";    }    @Transactional    @RequestMapping(value = {"/deleteInvoice"}, method = RequestMethod.GET)    public String detleteInvoice(@RequestParam("id") String id, Locale locale, Model model) {        invoiceService.deleteById(id);        return "redirect:invoice";    }    @Transactional    @RequestMapping(value = {"/editInvoice"}, method = RequestMethod.GET)    public String editInvoice(@RequestParam("id") String id, Locale locale, Model model) {        List<Invoice> invoices = invoiceService.getAll();        model.addAttribute("invoices", invoices);        Invoice invoice = invoiceService.findById(id);        model.addAttribute("invoice", invoice);        List<Status> statuses = new ArrayList<>();        statuses.add(Status.Cancel);        statuses.add(Status.Done);        statuses.add(Status.NotYet);        model.addAttribute("listStatus",statuses);        return "adminInvoicePage";    }    @Transactional    @RequestMapping(value = "/updateInvoice", method = RequestMethod.POST)    public String updateInvoice(@RequestParam("id") String id, Locale locale, Model model, HttpServletRequest request) {        String status = request.getParameter("rbStatus");        Invoice invoice = invoiceService.findById(id);        invoice.setStatus(Status.valueOf(status));        invoiceService.saveInvoice(invoice);        return "redirect:invoice";    }}