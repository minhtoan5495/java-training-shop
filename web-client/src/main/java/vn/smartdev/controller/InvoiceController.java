package vn.smartdev.controller;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Controller;import org.springframework.transaction.annotation.Transactional;import org.springframework.ui.Model;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestMethod;import org.springframework.web.bind.annotation.RequestParam;import vn.smartdev.invoice.dao.entity.Invoice;import vn.smartdev.invoice.dao.entity.Status;import vn.smartdev.invoice.exception.InvoiceNotFoundException;import vn.smartdev.invoice.services.InvoiceServices;import javax.servlet.http.HttpServletRequest;import java.util.ArrayList;import java.util.Arrays;import java.util.List;import java.util.Locale;/** * Created by Nguyen on 30/11/2016. */@Controller@RequestMapping(value = "/admin")public class InvoiceController {    private static final Logger logger = LoggerFactory.getLogger(InvoiceController.class);    @Autowired    InvoiceServices invoiceServices;    @Transactional    @RequestMapping(value = {"/invoice"}, method = RequestMethod.GET)    public String invoice(Model model) throws Exception {        List<Invoice> invoices = invoiceServices.getAll();        model.addAttribute("invoices", invoices);        return "adminInvoicePage";    }    @Transactional    @RequestMapping(value = {"/deleteInvoice"}, method = RequestMethod.GET)    public String deleteInvoice(@RequestParam("id") String id) throws InvoiceNotFoundException {        invoiceServices.delete(id);        return "redirect:invoice";    }    @Transactional    @RequestMapping(value = {"/editInvoice"}, method = RequestMethod.GET)    public String editInvoice(@RequestParam("id") String id, Model model) throws Exception {        List<Invoice> invoices = invoiceServices.getAll();        model.addAttribute("invoices", invoices);        Invoice invoice = invoiceServices.findById(id);        model.addAttribute("invoice", invoice);        List<Status> statuses = Arrays.asList(Status.values());        model.addAttribute("listStatus",statuses);        return "adminInvoicePage";    }    @Transactional    @RequestMapping(value = "/updateInvoice", method = RequestMethod.POST)    public String updateInvoice(@RequestParam("id") String id, HttpServletRequest request) throws Exception {        String status = request.getParameter("rbStatus");        Invoice invoice = invoiceServices.findById(id);        invoice.setStatus(Status.valueOf(status));        invoiceServices.updateInvoice(invoice);        return "redirect:invoice";    }}